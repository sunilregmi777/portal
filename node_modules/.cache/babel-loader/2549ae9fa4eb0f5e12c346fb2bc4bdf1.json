{"ast":null,"code":"import { fork, put, all, call, takeEvery } from 'redux-saga/effects';\nimport { loginError, loginSuccessful } from './actions';\nimport { LOGIN } from './actionTypes';\nimport loginData from '../../../assets/login-info.json';\nimport token from '../../../token';\n\nfunction* login({\n  payload: {\n    email,\n    password,\n    history\n  }\n}) {\n  try {\n    //const response = yield call();\n    if (email === loginData.email && password === loginData.password) {\n      localStorage.setItem(\"token\", token);\n      yield put(loginSuccessful());\n      history.push(\"/dashboard\");\n    } else {\n      loginError(\"Invalid email or password\");\n    }\n  } catch (error) {\n    yield put(loginError(error));\n  }\n}\n\nexport function* watchUserLogin() {\n  yield takeEvery(LOGIN, login);\n}\nexport function* loginSaga() {\n  yield all([fork(watchUserLogin)]);\n}\n\nfunction* logout({\n  payload: {\n    email,\n    password,\n    history\n  }\n}) {\n  try {\n    //const response = yield call();\n    localStorage.clear();\n    yield put(logoutSuccessful());\n    history.push(\"/dashboard\");\n  } catch (error) {\n    yield put(loginError(error));\n  }\n}\n\nexport function* watchUserLogout() {\n  yield takeEvery(LOGOUT, logout);\n}\nexport function* logoutSaga() {\n  yield all([fork(watchUserLogout)]);\n}","map":{"version":3,"sources":["/home/sunil/Karyathalo/admin-portal/src/store/auth/login/saga.js"],"names":["fork","put","all","call","takeEvery","loginError","loginSuccessful","LOGIN","loginData","token","login","payload","email","password","history","localStorage","setItem","push","error","watchUserLogin","loginSaga","logout","clear","logoutSuccessful","watchUserLogout","LOGOUT","logoutSaga"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+BC,SAA/B,QAAgD,oBAAhD;AAEA,SAASC,UAAT,EAAqBC,eAArB,QAA4C,WAA5C;AAEA,SAASC,KAAT,QAAsB,eAAtB;AAEA,OAAOC,SAAP,MAAsB,iCAAtB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,UAAUC,KAAV,CAAgB;AAAEC,EAAAA,OAAO,EAAE;AAAEC,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBC,IAAAA;AAAnB;AAAX,CAAhB,EAA2D;AACvD,MAAI;AACA;AACA,QAAIF,KAAK,KAAKJ,SAAS,CAACI,KAApB,IAA6BC,QAAQ,KAAKL,SAAS,CAACK,QAAxD,EAAkE;AAC9DE,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,KAA9B;AACA,YAAMR,GAAG,CAACK,eAAe,EAAhB,CAAT;AACAQ,MAAAA,OAAO,CAACG,IAAR,CAAa,YAAb;AACH,KAJD,MAIO;AACHZ,MAAAA,UAAU,CAAC,2BAAD,CAAV;AACH;AACJ,GATD,CAUA,OAAOa,KAAP,EAAc;AACV,UAAMjB,GAAG,CAACI,UAAU,CAACa,KAAD,CAAX,CAAT;AACH;AACJ;;AAED,OAAO,UAAUC,cAAV,GAA2B;AAC9B,QAAMf,SAAS,CAACG,KAAD,EAAQG,KAAR,CAAf;AACH;AAED,OAAO,UAAUU,SAAV,GAAsB;AACzB,QAAMlB,GAAG,CAAC,CAACF,IAAI,CAACmB,cAAD,CAAL,CAAD,CAAT;AACH;;AAED,UAAUE,MAAV,CAAiB;AAAEV,EAAAA,OAAO,EAAE;AAAEC,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBC,IAAAA;AAAnB;AAAX,CAAjB,EAA4D;AACxD,MAAI;AACA;AACAC,IAAAA,YAAY,CAACO,KAAb;AACA,UAAMrB,GAAG,CAACsB,gBAAgB,EAAjB,CAAT;AACAT,IAAAA,OAAO,CAACG,IAAR,CAAa,YAAb;AACH,GALD,CAMA,OAAOC,KAAP,EAAc;AACV,UAAMjB,GAAG,CAACI,UAAU,CAACa,KAAD,CAAX,CAAT;AACH;AACJ;;AAED,OAAO,UAAUM,eAAV,GAA4B;AAC/B,QAAMpB,SAAS,CAACqB,MAAD,EAASJ,MAAT,CAAf;AACH;AAED,OAAO,UAAUK,UAAV,GAAuB;AAC1B,QAAMxB,GAAG,CAAC,CAACF,IAAI,CAACwB,eAAD,CAAL,CAAD,CAAT;AACH","sourcesContent":["import { fork, put, all, call, takeEvery } from 'redux-saga/effects'\n\nimport { loginError, loginSuccessful } from './actions';\n\nimport { LOGIN } from './actionTypes'\n\nimport loginData from '../../../assets/login-info.json'\nimport token from '../../../token'\n\nfunction* login({ payload: { email, password, history } }) {\n    try {\n        //const response = yield call();\n        if (email === loginData.email && password === loginData.password) {\n            localStorage.setItem(\"token\", token);\n            yield put(loginSuccessful());\n            history.push(\"/dashboard\");\n        } else {\n            loginError(\"Invalid email or password\");\n        }\n    }\n    catch (error) {\n        yield put(loginError(error));\n    }\n}\n\nexport function* watchUserLogin() {\n    yield takeEvery(LOGIN, login);\n}\n\nexport function* loginSaga() {\n    yield all([fork(watchUserLogin)]);\n}\n\nfunction* logout({ payload: { email, password, history } }) {\n    try {\n        //const response = yield call();\n        localStorage.clear();\n        yield put(logoutSuccessful());\n        history.push(\"/dashboard\");\n    }\n    catch (error) {\n        yield put(loginError(error));\n    }\n}\n\nexport function* watchUserLogout() {\n    yield takeEvery(LOGOUT, logout);\n}\n\nexport function* logoutSaga() {\n    yield all([fork(watchUserLogout)]);\n}"]},"metadata":{},"sourceType":"module"}